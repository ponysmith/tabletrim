(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(a.tabletrim=b(c))})}else{a.tabletrim=b(a.jQuery)}}(this,function(a){return function(h,f){var b={sticky:1,init:2,breakpoint:640,lag:200,};var d={table:"tabletrim",select:"tabletrim-select",option:"tabletrim-option",trimmed:"tabletrim-trimmed",active:"tabletrim-active",breakpoints:640};var e={trimmed:false,activeindex:null,timeout:null};var g={window:a(window)};var c=[];_private={init:function(k,j){a.extend(b,j);g.table=k;g.table.addClass(d.table);_private.build();g.window.on("resize",_private.resize);_private.check();return _public},build:function(){g.select=a('<select name="'+d.select+'"></select');g.table.find("thead th").each(function(){var j=a(this).index()+1;c[j]={index:j,title:a(this).html(),headercell:a(this),allcells:g.table.find("tr th:nth-child("+j+"), tr td:nth-child("+j+")"),bodycells:g.table.find("tbody tr th:nth-child("+j+"), tbody tr td:nth-child("+j+")")};var k=(j==b.sticky)?' disabled="disabled"':"";a('<option value="'+j+'" class="'+d.option+'"'+k+"></option>").text(c[j].title).appendTo(g.select)});g.select.on("change",function(){var j=a(this).find(":selected").val();_private.activate(j)})},resize:function(){clearInterval(e.timeout);e.timeout=setTimeout(_private.check,b.lag)},check:function(){if(g.window.width()>b.breakpoint&&e.trimmed){_private.untrim()}if(g.window.width()<=b.breakpoint&&!e.trimmed){_private.trim(b.init)}},trim:function(j){g.table.addClass(d.trimmed);_private.activate(b.sticky);_private.activate(j);e.trimmed=true},untrim:function(){g.table.removeClass(d.trimmed);_private.deactivate();e.trimmed=false},activate:function(j){if(e.activeindex!=null){_private.deactivate()}e.activeindex=j;_private.addcontrols();c[j].allcells.addClass(d.active)},deactivate:function(){if(e.activeindex==b.sticky){return false}c[e.activeindex].allcells.removeClass(d.active);_private.removecontrols()},addcontrols:function(){if(e.activeindex==b.sticky){return false}var j=g.select.clone(true);j.find("option:nth-child("+e.activeindex+")").attr("selected","selected");c[e.activeindex].headercell.empty().append(j)},removecontrols:function(){c[e.activeindex].headercell.empty().text(c[e.activeindex].title)}};_public={trim:function(j){_private.trim(j)},untrim:function(){_private.untrim(i)},};return _private.init(h,f)}}));
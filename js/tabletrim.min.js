(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(a.tabletrim=b(c))})}else{a.tabletrim=b(a.jQuery)}}(this,function(a){return function(h,f){var b={sticky:1,init:2,breakpoint:640,lag:100,};var d={table:"tabletrim",rtl:"tabletrim-rtl",ltr:"tabletrim-ltr",select:"tabletrim-select",option:"tabletrim-option",trimmed:"tabletrim-trimmed",active:"tabletrim-active",sticky:"tabletrim-sticky",breakpoints:640};var e={trimmed:false,activeindex:null,timeout:null};var g={window:a(window)};var c=[];_private={init:function(j,i){a.extend(b,i);g.table=j;g.table.addClass(d.table);_private.build();g.window.on("resize",_private.resize);_private.check();return _public},build:function(){g.select=a('<select class="'+d.select+'"></select');g.table.find("thead th").each(function(){var i=a(this).index()+1;c[i]={index:i,title:a(this).html(),headercell:a(this),allcells:g.table.find("tr th:nth-child("+i+"), tr td:nth-child("+i+")"),bodycells:g.table.find("tbody tr th:nth-child("+i+"), tbody tr td:nth-child("+i+")")};var j=(i==b.sticky)?' disabled="disabled"':"";a('<option value="'+i+'" class="'+d.option+'"'+j+"></option>").text(c[i].title).appendTo(g.select)});g.select.on("change",function(){var i=a(this).find(":selected").val();_private.activate(i)})},resize:function(){clearInterval(e.timeout);e.timeout=setTimeout(_private.check,b.lag)},check:function(){if(g.window.width()>b.breakpoint&&e.trimmed){_private.untrim()}if(g.window.width()<=b.breakpoint&&!e.trimmed){_private.trim(b.init)}},trim:function(j){g.table.addClass(d.trimmed);_private.activate(b.sticky);_private.activate(j);e.trimmed=true},untrim:function(){g.table.removeClass(d.trimmed+" "+d.rtl+" "+d.ltr);_private.deactivate();e.trimmed=false},activate:function(j){if(e.activeindex!=null){_private.deactivate()}if(j==b.sticky){c[j].allcells.addClass(d.sticky)}else{(j>b.sticky)?g.table.removeClass(d.rtl).addClass(d.ltr):g.table.removeClass(d.ltr).addClass(d.rtl);e.activeindex=j;_private.addcontrols();c[j].allcells.addClass(d.active)}},deactivate:function(){c[e.activeindex].allcells.removeClass(d.active);_private.removecontrols()},addcontrols:function(){if(e.activeindex==b.sticky){return false}var i=g.select.clone(true);i.find("option:nth-child("+e.activeindex+")").attr("selected","selected");c[e.activeindex].headercell.empty().append(i)},removecontrols:function(){c[e.activeindex].headercell.empty().text(c[e.activeindex].title)}};_public={trim:function(j){_private.trim(j)},untrim:function(){_private.untrim()},};return _private.init(h,f)}}));